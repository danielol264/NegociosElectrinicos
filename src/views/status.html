<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>The ByteShop ‚Äî Estado del servicio (mock)</title>

  <!-- Icono simple -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='80'>üíª</text></svg>">

  <!-- Chart.js desde CDN para la mini-gr√°fica -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    /* --- Reset y tipograf√≠a --- */
    :root{
      --accent:#0f62fe;
      --muted:#6b7280;
      --card:#ffffff;
      --bg:#f5f7fb;
      --glass: rgba(255,255,255,0.6);
      --success:#10b981;
      --danger:#ef4444;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--bg), #eef2ff);
      color:#0f172a;
      -webkit-font-smoothing:antialiased;
    }

    /* --- Header / nav --- */
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:18px 28px;
      background:rgba(255,255,255,0.9);
      backdrop-filter: blur(6px);
      box-shadow: 0 1px 6px rgba(15,23,42,0.06);
      position:sticky;
      top:0;
      z-index:40;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      font-weight:700;
      font-size:18px;
    }
    .brand .logo{
      width:42px;
      height:42px;
      display:inline-grid;
      place-items:center;
      border-radius:8px;
      background:linear-gradient(135deg,#0f62fe,#7c3aed);
      color:white;
      font-size:20px;
      box-shadow:0 6px 18px rgba(12,74,247,0.12);
    }
    nav a{
      color:var(--muted);
      text-decoration:none;
      margin-left:18px;
      font-weight:600;
      font-size:14px;
    }

    /* --- Container --- */
    .container{
      max-width:1100px;
      margin:28px auto;
      padding:0 20px 60px;
    }

    .hero{
      display:flex;
      gap:20px;
      align-items:center;
      justify-content:space-between;
      margin-bottom:18px;
    }
    .hero .left h1{
      margin:0 0 6px;
      font-size:24px;
    }
    .hero .left p{
      margin:0;
      color:var(--muted);
      font-size:14px;
    }
    .hero .actions{
      display:flex;
      gap:10px;
      align-items:center;
    }
    .btn{
      padding:10px 14px;
      border-radius:10px;
      border:0;
      cursor:pointer;
      font-weight:700;
      background:var(--accent);
      color:white;
      box-shadow:0 6px 18px rgba(15,98,254,0.12);
    }
    .btn.secondary{
      background:transparent;
      color:var(--muted);
      border:1px solid rgba(15,23,42,0.06);
      box-shadow:none;
      font-weight:600;
    }

    /* --- Grid KPI --- */
    .grid{
      display:grid;
      grid-template-columns: repeat(3,1fr);
      gap:14px;
      margin-bottom:18px;
    }
    @media (max-width:900px){ .grid{ grid-template-columns: repeat(2,1fr);} }
    @media (max-width:520px){ .grid{ grid-template-columns: 1fr;} .hero{flex-direction:column;align-items:flex-start} }

    .card{
      background:var(--card);
      border-radius:12px;
      padding:16px;
      box-shadow: 0 6px 18px rgba(12,20,40,0.04);
      display:flex;
      align-items:center;
      gap:12px;
    }
    .card .kpi{
      display:flex;
      flex-direction:column;
    }
    .kpi .label{ font-size:13px; color:var(--muted); margin-bottom:6px; }
    .kpi .value{ font-size:20px; font-weight:800; letter-spacing:0.2px; }
    .kpi .meta{ font-size:12px; color:var(--muted); margin-top:6px; }

    .badge{
      padding:8px 10px;
      border-radius:10px;
      font-weight:700;
      font-size:13px;
      display:inline-block;
      min-width:84px;
      text-align:center;
    }
    .up{ background: linear-gradient(90deg,#ecfdf5,#bbf7d0); color:var(--success); border:1px solid rgba(16,185,129,0.12);}
    .down{ background: linear-gradient(90deg,#fff3f2,#ffdede); color:var(--danger); border:1px solid rgba(239,68,68,0.08);}

    /* --- Chart and details --- */
    .panel{
      margin-top:12px;
      display:grid;
      grid-template-columns: 1fr 320px;
      gap:14px;
    }
    @media (max-width:980px){ .panel{ grid-template-columns: 1fr; } }

    .chart-card{
      padding:18px;
      border-radius:12px;
      height: 500px;
      background:var(--card);
      box-shadow:0 6px 18px rgba(12,20,40,0.04);
    }

    .status-footer{
      margin-top:12px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      align-items:center;
      color:var(--muted);
      font-size:13px;
    }

    footer{
      margin-top:40px;
      text-align:center;
      color:var(--muted);
      font-size:13px;
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">T</div>
      <div>
        <div>The ByteShop</div>
        <div style="font-size:12px;color:var(--muted);font-weight:600">Estado del servicio ‚Äî mock</div>
      </div>
    </div>

    <nav>
      <a href="#">Inicio</a>
      <a href="#">Cat√°logo</a>
      <a href="#">Admin</a>
    </nav>
  </header>

  <main class="container">
    <section class="hero">
      <div class="left">
        <h1>Estado del servicio ‚Äî The ByteShop</h1>
        <p>Vista mock para mostrar uptime, latencia, TTFB y otros KPIs en campa√±as (ej. Buen Fin). Datos ficticios para presentaci√≥n.</p>
      </div>
      <div class="actions">
        <button class="btn" id="refreshBtn">Actualizar</button>
        <button class="btn secondary" id="exportBtn">Exportar (PNG)</button>
      </div>
    </section>

    <!-- KPI grid -->
    <section class="grid" aria-label="KPIs">
      <div class="card">
        <div class="kpi">
          <div class="label">Uptime</div>
          <div class="value" id="uptimeValue">99.9%</div>
          <div class="meta">Meta: 99.9%</div>
        </div>
        <div style="margin-left:auto"><span class="badge up">OK</span></div>
      </div>

      <div class="card">
        <div class="kpi">
          <div class="label">Latencia promedio</div>
          <div class="value" id="latencyValue">120 ms</div>
          <div class="meta">Rango objetivo: &lt; 200 ms</div>
        </div>
        <div style="margin-left:auto"><span class="badge up" id="latBadge">Estable</span></div>
      </div>

      <div class="card">
        <div class="kpi">
          <div class="label">TTFB</div>
          <div class="value" id="ttfbValue">80 ms</div>
          <div class="meta">Ideal &lt; 200 ms</div>
        </div>
        <div style="margin-left:auto"><span class="badge up">Bueno</span></div>
      </div>

      <div class="card">
        <div class="kpi">
          <div class="label">Usuarios simult√°neos (mock)</div>
          <div class="value" id="usersValue">250</div>
          <div class="meta">Sesiones activas ahora</div>
        </div>
        <div style="margin-left:auto"><span class="badge up">Normal</span></div>
      </div>

      <div class="card">
        <div class="kpi">
          <div class="label">Cat√°logo disponible</div>
          <div class="value" id="catalogValue">100%</div>
          <div class="meta">Todas las p√°ginas responden</div>
        </div>
        <div style="margin-left:auto"><span class="badge up">OK</span></div>
      </div>

      <div class="card">
        <div class="kpi">
          <div class="label">Errores 5xx (√∫lt. 1h)</div>
          <div class="value" id="errorValue">0</div>
          <div class="meta">Monitoreo del backend</div>
        </div>
        <div style="margin-left:auto"><span class="badge up">0</span></div>
      </div>
    </section>

    <!-- Chart + details -->
    <section class="panel">
      <div class="chart-card">
        <h3 style="margin:0 0 12px 0">Latencia (√∫ltimos 10 minutos)</h3>
        <canvas id="latChart" height="120"></canvas>
        <div class="status-footer">
          <div>√öltima actualizaci√≥n: <span id="lastUpdate">ahora</span></div>
          <div>Fuente: mock / m√©tricas internas</div>
        </div>
      </div>

      <div class="chart-card">
        <h3 style="margin:0 0 12px 0">Detalles r√°pidos</h3>
        <p style="margin:0 0 8px;color:var(--muted)">Recomendaciones si hay picos:</p>
        <ul style="margin:0 0 10px 18px;color:var(--muted);padding:0">
          <li>Activar CDN para im√°genes y assets.</li>
          <li>Habilitar cach√© en navegador y reverse-proxy.</li>
          <li>Aumentar r√©plicas front-end detr√°s del LB.</li>
        </ul>
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;">
          <button class="btn" id="simulateBtn">Simular pico</button>
          <button class="btn secondary" id="viewLogs">Ver logs (mock)</button>
        </div>
      </div>
    </section>

    <footer>
      <p>Mock dise√±ado para la entrega de la actividad ‚Äî The ByteShop ‚Ä¢ 2025</p>
    </footer>
  </main>

  <script>
    // Valores iniciales (mock)
    const state = {
      uptime: 99.9,
      latency: 120,
      ttfb: 80,
      users: 250,
      catalog: 100,
      errors: 0
    };

    // Actualizar visibles
    function render() {
      document.getElementById('uptimeValue').textContent = state.uptime.toFixed(1) + '%';
      document.getElementById('latencyValue').textContent = state.latency + ' ms';
      document.getElementById('ttfbValue').textContent = state.ttfb + ' ms';
      document.getElementById('usersValue').textContent = state.users;
      document.getElementById('catalogValue').textContent = state.catalog + '%';
      document.getElementById('errorValue').textContent = state.errors;
      document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString();
      // Badge text/color
      document.getElementById('latBadge').textContent = state.latency <= 200 ? 'Estable' : 'Alto';
    }

    // Chart: latencia
    const ctx = document.getElementById('latChart').getContext('2d');
    const labels = Array.from({length:10},(_,i)=>`${10-i}m`);
    const dataPoints = Array.from({length:10},()=> 80 + Math.round(Math.random()*120));
    const latChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: labels.reverse(),
        datasets: [{
          label: 'latencia ms',
          data: dataPoints,
          tension: 0.35,
          fill: true,
          borderWidth: 2,
          pointRadius: 2
        }]
      },
      options: {
        plugins:{legend:{display:false}},
        scales:{
          y:{beginAtZero:false}
        },
        maintainAspectRatio:false
      }
    });

    // Simula actualizaci√≥n
    function simulateUpdate(spike=false){
      // si spike true: sube usuarios y latencia
      if (spike) {
        state.users = Math.min(1200, state.users + Math.round(Math.random()*800 + 200));
        state.latency = Math.min(2000, state.latency + Math.round(Math.random()*700 + 200));
        state.uptime = Math.max(95, state.uptime - Math.random()*0.5);
        state.errors = Math.min(50, state.errors + Math.round(Math.random()*5));
      } else {
        // valores random suaves
        state.users = Math.max(50, Math.round(200 + Math.random()*400));
        state.latency = Math.round(60 + Math.random()*180);
        state.ttfb = Math.round(40 + Math.random()*140);
        state.uptime = 99.9;
        state.errors = 0;
      }

      // actualizar gr√°fica: shift left push new
      latChart.data.datasets[0].data.shift();
      latChart.data.datasets[0].data.push(state.latency);
      latChart.update();
      render();
    }

    // Botones
    document.getElementById('refreshBtn').addEventListener('click', ()=> simulateUpdate(false));
    document.getElementById('simulateBtn').addEventListener('click', ()=> simulateUpdate(true));
    document.getElementById('viewLogs').addEventListener('click', ()=> alert('Logs (mock): 0 errores cr√≠ticos.'));

    // Export simple: convertir la p√°gina a PNG (simple approach)
    document.getElementById('exportBtn').addEventListener('click', ()=> {
      alert('Export: toma una captura de pantalla y p√©gala en tu documento. (Mock export)');
    });

    // Render inicial
    render();
  </script>
</body>
</html>
